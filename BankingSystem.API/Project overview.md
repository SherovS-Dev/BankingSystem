# üìö –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ï–ö–¢–ê BANKING SYSTEM API
## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—é

---

## üéØ –ö–†–ê–¢–ö–ê–Ø –ü–†–ï–ó–ï–ù–¢–ê–¶–ò–Ø –ü–†–û–ï–ö–¢–ê (30 —Å–µ–∫—É–Ω–¥)

"–Ø —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª RESTful Banking System API –Ω–∞ ASP.NET Core 8 –∏ PostgreSQL. –≠—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –±–∞–Ω–∫–æ–≤—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å—á–µ—Ç–∞–º–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏. –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:
- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (Controller ‚Üí Service ‚Üí Repository ‚Üí Database)
- –†–∞–±–æ—Ç—É —Å PostgreSQL —á–µ—Ä–µ–∑ Npgsql
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–º—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- Repository Pattern –∏ Dependency Injection
- –í–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–æ–≤, —Å–Ω—è—Ç–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –∏ –ø–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏ —Å –ø–æ–ª–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∞–ª–∞–Ω—Å–æ–≤."

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#1-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#2-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#3-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
4. [–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞](#4-–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
5. [API Endpoints](#5-api-endpoints)
6. [–ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏](#6-–ø–∞—Ç—Ç–µ—Ä–Ω—ã-–∏-–ø—Ä–∞–∫—Ç–∏–∫–∏)
7. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#7-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
8. [–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#8-–ø—Ä–æ—Ü–µ—Å—Å-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
9. [–ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è](#9-–ø—Ä–æ–±–ª–µ–º—ã-–∏-—Ä–µ—à–µ–Ω–∏—è)
10. [–í–æ–∑–º–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏](#10-–≤–æ–∑–º–æ–∂–Ω—ã–µ-–≤–æ–ø—Ä–æ—Å—ã-–Ω–∞-—Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏)

---

## 1. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### 1.1 –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ **–º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π (Layered) –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ**:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PRESENTATION LAYER                    ‚îÇ
‚îÇ                  (Controllers - API)                     ‚îÇ
‚îÇ  ‚Ä¢ AccountsController - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞–º–∏               ‚îÇ
‚îÇ  ‚Ä¢ TransactionsController - –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ DTOs
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   BUSINESS LOGIC LAYER                   ‚îÇ
‚îÇ                      (Services)                          ‚îÇ
‚îÇ  ‚Ä¢ TransactionService - –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π        ‚îÇ
‚îÇ  ‚Ä¢ –í–∞–ª–∏–¥–∞—Ü–∏—è, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ Models
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   DATA ACCESS LAYER                      ‚îÇ
‚îÇ                    (Repositories)                        ‚îÇ
‚îÇ  ‚Ä¢ AccountRepository - CRUD –¥–ª—è —Å—á–µ—Ç–æ–≤                   ‚îÇ
‚îÇ  ‚Ä¢ TransactionRepository - CRUD –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ SQL/Npgsql
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     DATABASE LAYER                       ‚îÇ
‚îÇ                   (PostgreSQL)                           ‚îÇ
‚îÇ  ‚Ä¢ –¢–∞–±–ª–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è                        ‚îÇ
‚îÇ  ‚Ä¢ –•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã (sp_deposit_funds, –∏ —Ç.–¥.)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.2 –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞?

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SoC)** - –∫–∞–∂–¥—ã–π —Å–ª–æ–π —Ä–µ—à–∞–µ—Ç —Å–≤–æ—é –∑–∞–¥–∞—á—É
2. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å —Å–ª–æ–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
4. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - –∫–æ–¥ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏ –∏ –ø–æ–Ω—è—Ç–Ω–æ

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- Clean Architecture (–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è, –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)
- MVC (–Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è API)
- Monolithic (–Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è)

### 1.3 –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä: –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞**
```
1. HTTP POST ‚Üí /api/transactions/deposit
2. TransactionsController.Deposit()
   ‚Üì
3. –í–∞–ª–∏–¥–∞—Ü–∏—è ModelState (Data Annotations)
   ‚Üì
4. TransactionService.DepositAsync()
   ‚Üì
5. –í—ã–∑–æ–≤ —Ö—Ä–∞–Ω–∏–º–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä—ã sp_deposit_funds
   ‚Üì
6. PostgreSQL –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å –∏ —Å–æ–∑–¥–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
   ‚Üì
7. –í–æ–∑–≤—Ä–∞—Ç TransactionResultDto
   ‚Üì
8. HTTP 200 OK —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
```

---

## 2. –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö

### 2.1 Backend

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| ASP.NET Core | 8.0 | Web API framework |
| C# | 12 | –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è |
| Npgsql | 8.x | PostgreSQL data provider |
| PostgreSQL | 14+ | –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î |

### 2.2 –ü–æ—á–µ–º—É –≤—ã–±—Ä–∞–Ω—ã —ç—Ç–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏?

**ASP.NET Core 8.0:**
- ‚úÖ –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å (Windows, Linux, macOS)
- ‚úÖ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –±—ã—Å—Ç—Ä—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤)
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è DI (Dependency Injection)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ API –∏ –æ—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**PostgreSQL:**
- ‚úÖ Open-source –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è
- ‚úÖ ACID-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–≤–∞–∂–Ω–æ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Ö—Ä–∞–Ω–∏–º—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –®–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

**Npgsql:**
- ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π .NET –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è PostgreSQL
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ async/await
- ‚úÖ Connection pooling –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- ‚úÖ –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

## 3. –°–¢–†–£–ö–¢–£–†–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•

### 3.1 –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### **Customers (–ö–ª–∏–µ–Ω—Ç—ã)**
```sql
CREATE TABLE Customers (
    CustomerId SERIAL PRIMARY KEY,
    FirstName VARCHAR(50) NOT NULL,
    LastName VARCHAR(50) NOT NULL,
    MiddleName VARCHAR(50),
    DateOfBirth DATE NOT NULL,
    Email VARCHAR(100) UNIQUE NOT NULL,
    PhoneNumber VARCHAR(20) NOT NULL,
    PassportNumber VARCHAR(20) UNIQUE NOT NULL,
    Address VARCHAR(200),
    City VARCHAR(50),
    Country VARCHAR(50) DEFAULT 'Tajikistan',
    CreatedDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    IsActive BOOLEAN DEFAULT TRUE
);
```

**–ü–æ—á–µ–º—É —Ç–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞?**
- `SERIAL` - –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞
- `UNIQUE` –Ω–∞ Email –∏ PassportNumber - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- `IsActive` - –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (soft delete)
- `Timestamp` - –∞—É–¥–∏—Ç (–∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω –∫–ª–∏–µ–Ω—Ç)

#### **Accounts (–°—á–µ—Ç–∞)**
```sql
CREATE TABLE Accounts (
    AccountId SERIAL PRIMARY KEY,
    CustomerId INTEGER NOT NULL REFERENCES Customers(CustomerId),
    AccountNumber VARCHAR(30) UNIQUE NOT NULL,
    AccountType VARCHAR(20) NOT NULL,  -- Checking, Savings, Credit
    Balance DECIMAL(18, 2) DEFAULT 0.00,
    Currency VARCHAR(3) DEFAULT 'TJS',
    Status VARCHAR(20) DEFAULT 'Active',  -- Active, Frozen, Closed
    OpenDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    LastTransactionDate TIMESTAMP,
    CONSTRAINT CHK_Balance CHECK (Balance >= -100000),
    CONSTRAINT CHK_AccountType CHECK (AccountType IN ('Checking', 'Savings', 'Credit'))
);
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- `DECIMAL(18, 2)` - —Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—É–º–º (18 —Ü–∏—Ñ—Ä, 2 –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π)
- `CHECK` constraints - –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î
- `REFERENCES` - –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –¥–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- `Status` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å—á–µ—Ç–∞

#### **Transactions (–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)**
```sql
CREATE TABLE Transactions (
    TransactionId SERIAL PRIMARY KEY,
    AccountId INTEGER NOT NULL REFERENCES Accounts(AccountId),
    TransactionType VARCHAR(20) NOT NULL,  -- Deposit, Withdrawal, Transfer
    Amount DECIMAL(18, 2) NOT NULL,
    TransactionDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    Description VARCHAR(200),
    Status VARCHAR(20) DEFAULT 'Completed',
    ToAccountId INTEGER REFERENCES Accounts(AccountId),
    ReferenceNumber VARCHAR(50),  -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ä–µ—Ñ–µ—Ä–µ–Ω—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    BalanceAfter DECIMAL(18, 2),  -- –ë–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    CreatedBy VARCHAR(50),
    CONSTRAINT CHK_Amount CHECK (Amount > 0)
);
```

**–í–∞–∂–Ω—ã–µ –ø–æ–ª—è:**
- `ReferenceNumber` - –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- `BalanceAfter` - –¥–ª—è –∞—É–¥–∏—Ç–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `ToAccountId` - –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (nullable –¥–ª—è –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
- `CreatedBy` - –∫—Ç–æ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é

### 3.2 –ò–Ω–¥–µ–∫—Å—ã

```sql
-- –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –Ω–æ–º–µ—Ä—É —Å—á–µ—Ç–∞
CREATE UNIQUE INDEX idx_accounts_number ON Accounts(AccountNumber);

-- –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—á–µ—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞
CREATE INDEX idx_accounts_customer ON Accounts(CustomerId);

-- –î–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ)
CREATE INDEX idx_transactions_date ON Transactions(TransactionDate DESC);

-- –î–ª—è –ø–æ–∏—Å–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å—á–µ—Ç–∞
CREATE INDEX idx_transactions_account ON Transactions(AccountId);
```

**–ó–∞—á–µ–º –Ω—É–∂–Ω—ã –∏–Ω–¥–µ–∫—Å—ã?**
- ‚úÖ –£—Å–∫–æ—Ä–µ–Ω–∏–µ SELECT –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ 10-100 —Ä–∞–∑
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (UNIQUE –∏–Ω–¥–µ–∫—Å—ã)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è JOIN –æ–ø–µ—Ä–∞—Ü–∏–π

### 3.3 –•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

#### **sp_deposit_funds** (–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞)

```sql
CREATE OR REPLACE FUNCTION sp_deposit_funds(
    p_account_id INTEGER,
    p_amount DECIMAL(18, 2),
    p_description VARCHAR(200) DEFAULT NULL,
    p_created_by VARCHAR(50) DEFAULT NULL
)
RETURNS TABLE(
    success BOOLEAN,
    message TEXT,
    transaction_id INTEGER,
    new_balance DECIMAL(18, 2)
)
LANGUAGE plpgsql
AS $$
DECLARE
    v_balance DECIMAL(18, 2);
    v_reference VARCHAR(50);
    v_transaction_id INTEGER;
BEGIN
    -- 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å—á–µ—Ç–∞
    SELECT Balance INTO v_balance 
    FROM Accounts 
    WHERE AccountId = p_account_id AND Status = 'Active';
    
    IF v_balance IS NULL THEN
        RETURN QUERY SELECT FALSE, 'Account not found'::TEXT, 
                           NULL::INTEGER, NULL::DECIMAL;
        RETURN;
    END IF;
    
    -- 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞
    v_reference := 'DEP' || TO_CHAR(CURRENT_TIMESTAMP, 'YYYYMMDDHH24MISSUS');
    
    -- 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
    UPDATE Accounts
    SET Balance = Balance + p_amount,
        LastTransactionDate = CURRENT_TIMESTAMP
    WHERE AccountId = p_account_id
    RETURNING Balance INTO v_balance;
    
    -- 4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    INSERT INTO Transactions 
        (AccountId, TransactionType, Amount, Description, 
         Status, ReferenceNumber, BalanceAfter, CreatedBy)
    VALUES 
        (p_account_id, 'Deposit', p_amount, p_description,
         'Completed', v_reference, v_balance, p_created_by)
    RETURNING TransactionId INTO v_transaction_id;
    
    -- 5. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    RETURN QUERY SELECT TRUE, 'Success'::TEXT, 
                       v_transaction_id, v_balance;
END;
$$;
```

**–ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã?**

1. **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –º–µ–Ω—å—à–µ —Å–µ—Ç–µ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection
4. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –∏–∑ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç
5. **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î** - –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### **sp_transfer_funds** (–ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–∞ —Å—á–µ—Ç–∞
- –°–ø–∏—Å—ã–≤–∞–µ—Ç —Å –æ–¥–Ω–æ–≥–æ, –∑–∞—á–∏—Å–ª—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–π
- –°–æ–∑–¥–∞–µ—Ç –î–í–ï –∑–∞–ø–∏—Å–∏ –≤ Transactions (—Å–ø–∏—Å–∞–Ω–∏–µ –∏ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ)
- –ê—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (–∏–ª–∏ –≤—Å–µ —É—Å–ø–µ—à–Ω–æ, –∏–ª–∏ –Ω–∏—á–µ–≥–æ)

---

## 4. –ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ê

### 4.1 TransactionService

–≠—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

```csharp
public class TransactionService : ITransactionService
{
    private readonly ITransactionRepository _transactionRepository;
    private readonly string _connectionString;
    private readonly ILogger<TransactionService> _logger;
    
    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å DI
    public TransactionService(
        ITransactionRepository transactionRepository,
        string connectionString,
        ILogger<TransactionService> logger)
    {
        _transactionRepository = transactionRepository;
        _connectionString = connectionString;
        _logger = logger;
    }
}
```

### 4.2 –ú–µ—Ç–æ–¥ DepositAsync

```csharp
public async Task<TransactionResultDto> DepositAsync(
    int accountId, 
    decimal amount, 
    string? description)
{
    try
    {
        // 1. –°–æ–∑–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î
        await using var connection = new NpgsqlConnection(_connectionString);
        await connection.OpenAsync();
        
        // 2. –í—ã–∑—ã–≤–∞–µ–º —Ö—Ä–∞–Ω–∏–º—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É
        await using var command = new NpgsqlCommand(
            "SELECT * FROM sp_deposit_funds(@p_account_id, @p_amount, @p_description, @p_created_by)", 
            connection);
        
        // 3. –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        command.Parameters.AddWithValue("@p_account_id", accountId);
        command.Parameters.AddWithValue("@p_amount", amount);
        command.Parameters.AddWithValue("@p_description", description ?? (object)DBNull.Value);
        command.Parameters.AddWithValue("@p_created_by", "System");
        
        // 4. –í—ã–ø–æ–ª–Ω—è–µ–º –∏ —á–∏—Ç–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        await using var reader = await command.ExecuteReaderAsync();
        if (await reader.ReadAsync())
        {
            return new TransactionResultDto
            {
                Success = reader.GetBoolean(0),
                Message = reader.GetString(1),
                TransactionId = reader.IsDBNull(2) ? null : reader.GetInt32(2),
                NewBalance = reader.IsDBNull(3) ? null : reader.GetDecimal(3)
            };
        }
        
        return new TransactionResultDto
        {
            Success = false,
            Message = "–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –¥–µ–ø–æ–∑–∏—Ç–∞"
        };
    }
    catch (Exception ex)
    {
        // 5. –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        _logger.LogError(ex, "Error during deposit");
        return new TransactionResultDto
        {
            Success = false,
            Message = $"–û—à–∏–±–∫–∞: {ex.Message}",
            ErrorCode = "DEPOSIT_ERROR"
        };
    }
}
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
1. `async/await` - –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
2. `await using` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
3. Try-catch –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
5. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### 4.3 –ú–µ—Ç–æ–¥ TransferAsync

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±–æ–∏—Ö —Å—á–µ—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤
- –ê—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ö—Ä–∞–Ω–∏–º—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–¥–∏–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ–±–µ–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## 5. API ENDPOINTS

### 5.1 AccountsController

#### GET /api/accounts/{id}
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—á–µ—Ç–µ

```csharp
[HttpGet("{id}")]
public async Task<ActionResult<Account>> GetAccount(int id)
{
    try
    {
        var account = await _accountRepository.GetByIdAsync(id);
        
        if (account == null)
        {
            _logger.LogWarning("Account {AccountId} not found", id);
            return NotFound(new { message = "–°—á–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω" });
        }
        
        return Ok(account);
    }
    catch (Exception ex)
    {
        _logger.LogError(ex, "Error retrieving account {AccountId}", id);
        return StatusCode(500, new { message = "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞" });
    }
}
```

**HTTP –ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤:**
- `200 OK` - —Å—á–µ—Ç –Ω–∞–π–¥–µ–Ω
- `404 Not Found` - —Å—á–µ—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- `500 Internal Server Error` - –æ—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

#### GET /api/accounts/customer/{customerId}
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—á–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
[
  {
    "accountId": 1,
    "customerId": 1,
    "accountNumber": "TJ72001234567890123456",
    "accountType": "Checking",
    "balance": 15000.00,
    "currency": "TJS",
    "status": "Active"
  },
  {
    "accountId": 2,
    "customerId": 1,
    "accountNumber": "TJ72001234567890123457",
    "accountType": "Savings",
    "balance": 50000.00,
    "currency": "TJS",
    "status": "Active"
  }
]
```

### 5.2 TransactionsController

#### POST /api/transactions/deposit
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞

**Request Body:**
```json
{
  "accountId": 1,
  "amount": 5000.00,
  "description": "–ó–∞—Ä–ø–ª–∞—Ç–∞"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Deposit completed successfully",
  "transactionId": 15,
  "newBalance": 20000.00
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- AccountId - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
- Amount - –æ—Ç 0.01 –¥–æ 10,000,000
- Description - –º–∞–∫—Å–∏–º—É–º 200 —Å–∏–º–≤–æ–ª–æ–≤

#### POST /api/transactions/transfer
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏

**Request Body:**
```json
{
  "fromAccountId": 1,
  "toAccountId": 2,
  "amount": 1000.00,
  "description": "–ü–µ—Ä–µ–≤–æ–¥ –¥—Ä—É–≥—É"
}
```

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
1. –û–±–∞ —Å—á–µ—Ç–∞ –¥–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å
2. –û–±–∞ —Å—á–µ—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω—ã
3. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
4. –°—É–º–º–∞ –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö (0.01 - 1,000,000)

---

## 6. –ü–ê–¢–¢–ï–†–ù–´ –ò –ü–†–ê–ö–¢–ò–ö–ò

### 6.1 Repository Pattern

**–ß—Ç–æ —ç—Ç–æ?**
–ü–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –æ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
```csharp
public interface IAccountRepository
{
    Task<Account?> GetByIdAsync(int id);
    Task<Account?> GetByAccountNumberAsync(string accountNumber);
    Task<IEnumerable<Account>> GetByCustomerIdAsync(int customerId);
    Task<Account> CreateAsync(Account account);
    Task UpdateAsync(Account account);
    Task<decimal> GetBalanceAsync(int accountId);
}
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```csharp
public class AccountRepository : IAccountRepository
{
    private readonly string _connectionString;
    
    public AccountRepository(string connectionString)
    {
        _connectionString = connectionString;
    }
    
    public async Task<Account?> GetByIdAsync(int id)
    {
        await using var connection = new NpgsqlConnection(_connectionString);
        await connection.OpenAsync();
        
        await using var command = new NpgsqlCommand(
            "SELECT * FROM accounts WHERE accountid = @Id", 
            connection);
        command.Parameters.AddWithValue("@Id", id);
        
        await using var reader = await command.ExecuteReaderAsync();
        if (await reader.ReadAsync())
        {
            return MapAccount(reader);
        }
        
        return null;
    }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mock)
- ‚úÖ –ú–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å PostgreSQL –Ω–∞ MongoDB)
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

### 6.2 Dependency Injection (DI)

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Program.cs:**
```csharp
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
builder.Services.AddScoped<IAccountRepository>(provider =>
    new AccountRepository(connectionString));

builder.Services.AddScoped<ITransactionRepository>(provider =>
    new TransactionRepository(connectionString));

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
builder.Services.AddScoped<ITransactionService>(provider =>
    new TransactionService(
        provider.GetRequiredService<ITransactionRepository>(),
        connectionString,
        provider.GetRequiredService<ILogger<TransactionService>>()));
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å (loose coupling)
- ‚úÖ –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –æ–±—ä–µ–∫—Ç–æ–≤

**–ñ–∏–∑–Ω–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã:**
- `Scoped` - –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç –Ω–∞ HTTP-–∑–∞–ø—Ä–æ—Å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–¥–µ—Å—å)
- `Transient` - –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –∫–∞–∂–¥—ã–π —Ä–∞–∑
- `Singleton` - –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç –Ω–∞ –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### 6.3 DTO (Data Transfer Objects)

**–ó–∞—á–µ–º –Ω—É–∂–Ω—ã DTO?**
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –ë–î –∏ API
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ç–µ–º, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

**–ü—Ä–∏–º–µ—Ä:**
```csharp
public class DepositRequest
{
    [Required]
    public int AccountId { get; set; }
    
    [Required]
    [Range(0.01, 10000000, ErrorMessage = "–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.01 –¥–æ 10,000,000")]
    public decimal Amount { get; set; }
    
    [MaxLength(200)]
    public string? Description { get; set; }
}
```

### 6.4 Async/Await

**–ü–æ—á–µ–º—É async?**
- ‚úÖ –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞
- ‚úÖ –õ—É—á—à–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–±–æ–ª—å—à–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤

**–ü—Ä–∞–≤–∏–ª–∞:**
1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `await` —Å async –º–µ—Ç–æ–¥–∞–º–∏
2. –í–æ–∑–≤—Ä–∞—â–∞—Ç—å `Task<T>` –∏–ª–∏ `Task`
3. –ò–º–µ–Ω–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `Async`
4. –ù–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å `.Result` –∏–ª–∏ `.Wait()`

---

## 7. –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### 7.1 –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ù–∞ —É—Ä–æ–≤–Ω–µ DTO (Data Annotations):**
```csharp
[Required]
[Range(0.01, 10000000, ErrorMessage = "–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.01 –¥–æ 10,000,000")]
public decimal Amount { get; set; }
```

**–ù–∞ —É—Ä–æ–≤–Ω–µ –ë–î (CHECK constraints):**
```sql
CONSTRAINT CHK_Amount CHECK (Amount > 0)
```

**–í Controller:**
```csharp
if (!ModelState.IsValid)
    return BadRequest(ModelState);
```

### 7.2 –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**Try-Catch –±–ª–æ–∫–∏:**
```csharp
try
{
    // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
}
catch (Exception ex)
{
    _logger.LogError(ex, "Error message");
    return StatusCode(500, new { message = "–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" });
}
```

**–ü—Ä–∞–≤–∏–ª–∞:**
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ –ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î –∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –ª–æ–≥–∏–∫—É

### 7.3 SQL Injection Protection

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:**
```csharp
command.Parameters.AddWithValue("@Id", id);  // ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ
```

**–ù–ï –î–ï–õ–ê–¢–¨:**
```csharp
var query = $"SELECT * FROM accounts WHERE id = {id}";  // ‚ùå SQL Injection!
```

### 7.4 –ß—Ç–æ –µ—â–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å?

**–î–ª—è production:**
1. **JWT Authentication** - —Ç–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞
2. **Authorization** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (—Ä–æ–ª–∏: Admin, Manager, Customer)
3. **Rate Limiting** - –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS
4. **HTTPS** - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞
5. **Input Sanitization** - –æ—á–∏—Å—Ç–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
6. **CORS** - –∫–æ–Ω—Ç—Ä–æ–ª—å cross-origin –∑–∞–ø—Ä–æ—Å–æ–≤

---

## 8. –ü–†–û–¶–ï–°–° –†–ê–ó–†–ê–ë–û–¢–ö–ò

### 8.1 –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–®–∞–≥ 1: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î**
```
1. –û–ø—Ä–µ–¥–µ–ª–∏–ª —Å—É—â–Ω–æ—Å—Ç–∏ (Customers, Accounts, Transactions)
2. –°–æ–∑–¥–∞–ª ER-–¥–∏–∞–≥—Ä–∞–º–º—É
3. –ù–∞–ø–∏—Å–∞–ª SQL-—Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
4. –î–æ–±–∞–≤–∏–ª –∏–Ω–¥–µ–∫—Å—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
5. –°–æ–∑–¥–∞–ª —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
```

**–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**
```bash
dotnet new webapi -n BankingSystem.API
cd BankingSystem.API
dotnet add package Npgsql
```

**–®–∞–≥ 3: –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**
```
1. –°–æ–∑–¥–∞–ª –ø–∞–ø–∫—É Models/
2. –û–ø—Ä–µ–¥–µ–ª–∏–ª –∫–ª–∞—Å—Å—ã: Account, Customer, Transaction, User
3. –î–æ–±–∞–≤–∏–ª computed properties (IsActive, FullName, –∏ —Ç.–¥.)
```

**–®–∞–≥ 4: Data Access Layer**
```
1. –°–æ–∑–¥–∞–ª –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ Interfaces/
2. –†–µ–∞–ª–∏–∑–æ–≤–∞–ª —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤ Repositories/
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª Npgsql –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL
4. –†–µ–∞–ª–∏–∑–æ–≤–∞–ª mapping –∏–∑ DataReader –≤ –º–æ–¥–µ–ª–∏
```

**–®–∞–≥ 5: Business Logic Layer**
```
1. –°–æ–∑–¥–∞–ª —Å–µ—Ä–≤–∏—Å—ã –≤ Services/
2. –†–µ–∞–ª–∏–∑–æ–≤–∞–ª TransactionService
3. –î–æ–±–∞–≤–∏–ª –≤—ã–∑–æ–≤—ã —Ö—Ä–∞–Ω–∏–º—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä
4. –î–æ–±–∞–≤–∏–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```

**–®–∞–≥ 6: Presentation Layer**
```
1. –°–æ–∑–¥–∞–ª –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤ Controllers/
2. –î–æ–±–∞–≤–∏–ª endpoints
3. –ù–∞—Å—Ç—Ä–æ–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é
4. –î–æ–±–∞–≤–∏–ª –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
```

**–®–∞–≥ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
```
1. –°–æ–∑–¥–∞–ª —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª —á–µ—Ä–µ–∑ Postman/Swagger
3. –ü—Ä–æ–≤–µ—Ä–∏–ª edge cases
4. –ò—Å–ø—Ä–∞–≤–∏–ª –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –±–∞–≥–∏
```

### 8.2 –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- **IDE:** Visual Studio / Rider / VS Code
- **–ë–î –∫–ª–∏–µ–Ω—Ç:** pgAdmin / DBeaver
- **API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** Postman / Swagger
- **Git:** –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π

---

## 9. –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ TransactionService

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ú–µ—Ç–æ–¥—ã DepositAsync, WithdrawAsync, TransferAsync –∏–º–µ—é—Ç –ø–æ—Ö–æ–∂–∏–π –∫–æ–¥ –¥–ª—è –≤—ã–∑–æ–≤–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä.

**–†–µ—à–µ–Ω–∏–µ:**
–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å generic –º–µ—Ç–æ–¥:
```csharp
private async Task<TransactionResultDto> ExecuteStoredProcedure(
    string procedureName, 
    params NpgsqlParameter[] parameters)
{
    // –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–∑–æ–≤–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä
}
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Connection String –≤ –∫–æ–¥–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
–•–∞—Ä–¥–∫–æ–¥ connection string –Ω–µ–±–µ–∑–æ–ø–∞—Å–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å appsettings.json –∏ User Secrets:
```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Host=localhost;Database=BankingSystemDB;..."
  }
}
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ Repository

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —à–∞–≥–æ–≤, –Ω—É–∂–Ω—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã (–∫–∞–∫ –≤ –ø—Ä–æ–µ–∫—Ç–µ) –∏–ª–∏ Unit of Work pattern.

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –≤ –ë–î, –¥–∞–∂–µ –¥–ª—è —Å–ø—Ä–∞–≤–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–∏—Ç—å IMemoryCache –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:
```csharp
var account = await _cache.GetOrCreateAsync(
    $"account_{id}",
    async entry =>
    {
        entry.AbsoluteExpirationRelativeToNow = TimeSpan.FromMinutes(5);
        return await _accountRepository.GetByIdAsync(id);
    });
```

---

## 10. –í–û–ó–ú–û–ñ–ù–´–ï –í–û–ü–†–û–°–´ –ù–ê –°–û–ë–ï–°–ï–î–û–í–ê–ù–ò–ò

### 10.1 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ü–æ—á–µ–º—É –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã?**

A: "–Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:
1. **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞, —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏) –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –º–µ–Ω—å—à–µ —Å–µ—Ç–µ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ –ë–î
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection –∏ –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
4. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ—Ü–µ–¥—É—Ä—É –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –∏–∑ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π –º–æ–≥–ª–∏ –±—ã—Ç—å Entity Framework —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –Ω–æ —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –¥–∞—é—Ç –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π."

---

**Q: –ß—Ç–æ —Ç–∞–∫–æ–µ Repository Pattern –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?**

A: "Repository Pattern - —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –æ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞—Ç—å mock-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è unit-—Ç–µ—Å—Ç–æ–≤
- **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL ‚Üí MongoDB) –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- **–ß–∏—Å—Ç–æ—Ç–∞ –∫–æ–¥–∞** - –≤—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

**–í –º–æ–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
```csharp
public interface IAccountRepository
{
    Task<Account?> GetByIdAsync(int id);
    Task<IEnumerable<Account>> GetByCustomerIdAsync(int customerId);
    // ...
}
```

–°–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –Ω–µ –∑–Ω–∞—è, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è."

---

**Q: –ö–∞–∫ –≤—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –æ—à–∏–±–∫–∏?**

A: "–Ø –∏—Å–ø–æ–ª—å–∑—É—é –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫:

1. **–ù–∞ —É—Ä–æ–≤–Ω–µ –ë–î** - CHECK constraints, UNIQUE –∏–Ω–¥–µ–∫—Å—ã
2. **–ù–∞ —É—Ä–æ–≤–Ω–µ DTO** - Data Annotations –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
3. **–ù–∞ —É—Ä–æ–≤–Ω–µ Controller** - –ø—Ä–æ–≤–µ—Ä–∫–∞ ModelState
4. **Try-Catch –±–ª–æ–∫–∏** - –¥–ª—è runtime –æ—à–∏–±–æ–∫

```csharp
try
{
    // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
}
catch (Exception ex)
{
    _logger.LogError(ex, "–î–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞");
    return StatusCode(500, new { message = "–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" });
}
```

–í–∞–∂–Ω–æ:
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ HTTP –∫–æ–¥—ã"

---

**Q: –ü–æ—á–µ–º—É –≤—ã –≤—ã–±—Ä–∞–ª–∏ PostgreSQL, –∞ –Ω–µ SQL Server?**

A: "–Ø –≤—ã–±—Ä–∞–ª PostgreSQL –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:

1. **Open-source –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è** - –Ω–µ—Ç –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç
2. **ACID-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ—Ç–ª–∏—á–Ω–∞—è –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏
4. **–ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Linux/Windows/Mac
5. **–®–∏—Ä–æ–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ** - –º–Ω–æ–≥–æ –∫—Ä—É–ø–Ω—ã—Ö –±–∞–Ω–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç PostgreSQL

SQL Server —Ç–æ–∂–µ –æ—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä, –Ω–æ PostgreSQL –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤, –≥–¥–µ –≤–∞–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å –∏ –Ω–∏–∑–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã."

---

**Q: –ö–∞–∫ –≤—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π?**

A: "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Ä–æ–≤–Ω—è—Ö:

1. **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection
```csharp
command.Parameters.AddWithValue("@Id", id);
```

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –Ω–∞ —É—Ä–æ–≤–Ω–µ DTO –∏ –ë–î
```csharp
[Range(0.01, 10000000, ErrorMessage = "–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0.01 –¥–æ 10,000,000")]
```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª** - –≤ —Ö—Ä–∞–Ω–∏–º—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö
```sql
IF v_balance < p_amount THEN
    RETURN QUERY SELECT FALSE, 'Insufficient funds';
    RETURN;
END IF;
```

4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–ª—è –∞—É–¥–∏—Ç–∞
5. **HTTP-only connections** - –≤ production –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å HTTPS

**–ß—Ç–æ –µ—â–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- JWT authentication
- Role-based authorization
- Rate limiting
- Encryption at rest"

---

**Q: –ö–∞–∫ –≤—ã —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ —Å–≤–æ–π –∫–æ–¥?**

A: "–í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Postman, –Ω–æ –≤ production-–≤–µ—Ä—Å–∏–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

1. **Unit —Ç–µ—Å—Ç—ã** - –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
```csharp
[Fact]
public async Task DepositAsync_ValidAccount_ReturnsSuccess()
{
    // Arrange
    var mockRepo = new Mock<ITransactionRepository>();
    var service = new TransactionService(mockRepo.Object, ...);
    
    // Act
    var result = await service.DepositAsync(1, 1000, "test");
    
    // Assert
    Assert.True(result.Success);
}
```

2. **Integration —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
3. **End-to-End —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints

–¢–∞–∫–∂–µ –≤–∞–∂–Ω–æ:
- Code coverage (–º–∏–Ω–∏–º—É–º 80%)
- Load testing
- Security testing"

---

**Q: –ß—Ç–æ –±—ã –≤—ã —É–ª—É—á—à–∏–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ?**

A: "–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:

**–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –Ω–µ–¥–µ–ª–∏):**
1. –î–æ–±–∞–≤–∏—Ç—å JWT authentication
2. –ù–∞–ø–∏—Å–∞—Ç—å unit –∏ integration —Ç–µ—Å—Ç—ã
3. –î–æ–±–∞–≤–∏—Ç—å Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
5. Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

**–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞):**
1. Event Sourcing –¥–ª—è –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏
2. CQRS pattern (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏)
3. Message queue (RabbitMQ) –¥–ª—è async –æ–ø–µ—Ä–∞—Ü–∏–π
4. API versioning
5. Health checks –∏ metrics

**–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤):**
1. –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
2. Event-driven architecture
3. GraphQL endpoint
4. Real-time notifications (SignalR)
5. ML –¥–ª—è fraud detection"

---

### 10.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ü–æ—á–µ–º—É –≤—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ Entity Framework?**

A: "–Ø —Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ –≤—ã–±—Ä–∞–ª Npgsql –∏ ADO.NET –≤–º–µ—Å—Ç–æ Entity Framework –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Npgsql:**
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ø—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –±—ã—Å—Ç—Ä–µ–µ
2. **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ SQL
3. **–•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã** - –ª–µ–≥–∫–æ –≤—ã–∑—ã–≤–∞—Ç—å
4. **–ú–µ–Ω—å—à–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π** - –ø—Ä–æ—â–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å

**–ö–æ–≥–¥–∞ EF –ª—É—á—à–µ:**
- –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ CRUD –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –ú–Ω–æ–≥–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- –ù—É–∂–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏
- –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç LINQ

**–í –º–æ–µ–º —Å–ª—É—á–∞–µ:**
–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ø–æ—ç—Ç–æ–º—É —á–∏—Å—Ç—ã–π ADO.NET –±—ã–ª –ª—É—á—à–∏–º –≤—ã–±–æ—Ä–æ–º."

---

**Q: –ö–∞–∫ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è?**

A: "–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:

**–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ API
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Load Balancer (nginx/HAProxy)
3. –í—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ –æ–¥–Ω–æ–π –ë–î

```
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   nginx   ‚îÇ (Load Balancer)
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚ñº           ‚ñº         ‚ñº         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ API 1 ‚îÇ  ‚îÇ API 2 ‚îÇ  ‚îÇ API 3 ‚îÇ  ‚îÇ API 4 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ PostgreSQL‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î:**
- Read replicas –¥–ª—è —á—Ç–µ–Ω–∏—è
- Master-Slave —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è
- Sharding –ø–æ customer_id

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
- Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- Message queue –¥–ª—è async –æ–ø–µ—Ä–∞—Ü–∏–π
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏"

---

### 10.3 –ë–∏–∑–Ω–µ—Å-–≤–æ–ø—Ä–æ—Å—ã

**Q: –ü–æ—á–µ–º—É —ç—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –ª—É—á—à–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤?**

A: "–ú–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤:

1. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ø—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –±—ã—Å—Ç—Ä–µ–µ ORM
3. **–ê—É–¥–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å** - –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å BalanceAfter –∏ ReferenceNumber
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - stateless API, –ª–µ–≥–∫–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å
5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–†–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: < 50ms –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: > 1000 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π/—Å–µ–∫
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: 99.9% (–ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ)"

---

**Q: –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω—è–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞?**

A: "–ü–æ–ª–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–Ω—è–ª–∞ –ø—Ä–∏–º–µ—Ä–Ω–æ 3-4 –¥–Ω—è:

**–î–µ–Ω—å 1 (6-8 —á–∞—Å–æ–≤):**
- –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î
- –°–æ–∑–¥–∞–Ω–∏–µ SQL —Å—Ö–µ–º—ã
- –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–º—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä

**–î–µ–Ω—å 2 (6-8 —á–∞—Å–æ–≤):**
- –°–æ–∑–¥–∞–Ω–∏–µ .NET –ø—Ä–æ–µ–∫—Ç–∞
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- –ë–∞–∑–æ–≤—ã–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏

**–î–µ–Ω—å 3 (6-8 —á–∞—Å–æ–≤):**
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ö—Ä–∞–Ω–∏–º—ã–º–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏

**–î–µ–Ω—å 4 (4-6 —á–∞—Å–æ–≤):**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README)

**–ò—Ç–æ–≥–æ:** 22-30 —á–∞—Å–æ–≤ —á–∏—Å—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏."

---

## 11. –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ü–†–û–ï–ö–¢–ê

### 11.1 –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏

**1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (2 –º–∏–Ω—É—Ç—ã)**
- –ù–∞—Ä–∏—Å—É–π—Ç–µ –¥–∏–∞–≥—Ä–∞–º–º—É —Å–ª–æ–µ–≤
- –û–±—ä—è—Å–Ω–∏—Ç–µ –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–∫–∞–∂–∏—Ç–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

**2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (3 –º–∏–Ω—É—Ç—ã)**
- –ü–æ–∫–∞–∂–∏—Ç–µ —Å—Ö–µ–º—É —Ç–∞–±–ª–∏—Ü
- –û–±—ä—è—Å–Ω–∏—Ç–µ —Å–≤—è–∑–∏
- –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Ö—Ä–∞–Ω–∏–º—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É

**3. –ö–æ–¥ (5 –º–∏–Ω—É—Ç)**
- –ü–æ–∫–∞–∂–∏—Ç–µ –æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –û–±—ä—è—Å–Ω–∏—Ç–µ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å –º–µ—Ç–æ–¥
- –ü–æ–∫–∞–∂–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**4. API –≤ –¥–µ–π—Å—Ç–≤–∏–∏ (3 –º–∏–Ω—É—Ç—ã)**
- –ü–æ–∫–∞–∂–∏—Ç–µ GET –∑–∞–ø—Ä–æ—Å
- –ü–æ–∫–∞–∂–∏—Ç–µ POST deposit
- –ü–æ–∫–∞–∂–∏—Ç–µ POST transfer
- –ü–æ–∫–∞–∂–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–∫–∏

**5. –í–æ–ø—Ä–æ—Å—ã (–æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)**

### 11.2 –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–º–æ

**–ü–µ—Ä–µ–¥ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ–º:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ë–î –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ endpoints
3. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ Postman –∫–æ–ª–ª–µ–∫—Ü–∏—é
4. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–¥ –≤ IDE —Å –∑–∞–∫–ª–∞–¥–∫–∞–º–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–π–ª–∞—Ö
5. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –¥–∏–∞–≥—Ä–∞–º–º—ã (–º–æ–∂–Ω–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –Ω–∞ –¥–æ—Å–∫–µ)

---

## 12. –ò–¢–û–ì–û–í–´–ô –ß–ï–ö–õ–ò–°–¢

### –ß—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã —É–º–µ—Ç—å –æ–±—ä—è—Å–Ω–∏—Ç—å:

‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–æ—á–µ–º—É –æ–Ω–∞ –≤—ã–±—Ä–∞–Ω–∞
‚úÖ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–π —Å–ª–æ–π
‚úÖ –ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
‚úÖ –ß—Ç–æ —Ç–∞–∫–æ–µ Repository Pattern –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω
‚úÖ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Dependency Injection
‚úÖ –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏
‚úÖ –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚úÖ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–π API endpoint
‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚úÖ –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

### –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —Ä–µ–∑—é–º–µ:

- ASP.NET Core 8.0
- RESTful API
- PostgreSQL
- Npgsql
- Repository Pattern
- Dependency Injection
- Async/Await
- Stored Procedures
- ACID Transactions
- Layered Architecture
- Data Annotations
- Logging
- Error Handling

---

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:
1. ‚úÖ –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
2. ‚úÖ –ù–∞–≤—ã–∫–∏ —Ä–∞–±–æ—Ç—ã —Å .NET –∏ C#
3. ‚úÖ –ó–Ω–∞–Ω–∏–µ SQL –∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
4. ‚úÖ –£–º–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å API
5. ‚úÖ –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
6. ‚úÖ –ó–Ω–∞–Ω–∏–µ best practices

**–ì–ª–∞–≤–Ω–æ–µ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏:**
- –ë—É–¥—å—Ç–µ —É–≤–µ—Ä–µ–Ω—ã –≤ —Ç–æ–º, —á—Ç–æ —Å–¥–µ–ª–∞–ª–∏
- –û–±—ä—è—Å–Ω—è–π—Ç–µ "–ø–æ—á–µ–º—É", –∞ –Ω–µ —Ç–æ–ª—å–∫–æ "—á—Ç–æ"
- –ü—Ä–∏–∑–Ω–∞–≤–∞–π—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –≥–æ–≤–æ—Ä–∏—Ç–µ –æ —É–ª—É—á—à–µ–Ω–∏—è—Ö
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —ç–Ω—Ç—É–∑–∏–∞–∑–º –∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º

**–£–¥–∞—á–∏ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏! üöÄ**